<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="NAS折腾记(5)：群晖硬盘休眠设置与分析"><meta itemprop=description content="NAS需要硬盘休眠么？群晖怎么才能硬盘休眠？ 这一期我们来聊聊硬盘休眠，同时分享一下我是怎么分析硬盘休眠的日志的，以及设置群晖系统休眠的。
这期我们从几个问题来入手。"><meta itemprop=datePublished content="2022-11-04T21:22:48+00:00"><meta itemprop=dateModified content="2022-11-04T21:22:48+00:00"><meta itemprop=wordCount content="3438"><meta itemprop=image content="https://razeencheng.com/android-chrome-192x192.png"><meta itemprop=keywords content="homelib,nas,"><meta property="og:title" content="NAS折腾记(5)：群晖硬盘休眠设置与分析"><meta property="og:description" content="NAS需要硬盘休眠么？群晖怎么才能硬盘休眠？ 这一期我们来聊聊硬盘休眠，同时分享一下我是怎么分析硬盘休眠的日志的，以及设置群晖系统休眠的。
这期我们从几个问题来入手。"><meta property="og:type" content="article"><meta property="og:url" content="https://razeencheng.com/posts/nas-05-hdd-hibernation/"><meta property="og:image" content="https://razeencheng.com/android-chrome-192x192.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-04T21:22:48+00:00"><meta property="article:modified_time" content="2022-11-04T21:22:48+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://razeencheng.com/android-chrome-192x192.png"><meta name=twitter:title content="NAS折腾记(5)：群晖硬盘休眠设置与分析"><meta name=twitter:description content="NAS需要硬盘休眠么？群晖怎么才能硬盘休眠？ 这一期我们来聊聊硬盘休眠，同时分享一下我是怎么分析硬盘休眠的日志的，以及设置群晖系统休眠的。
这期我们从几个问题来入手。"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=mask-icon href=/safari-pinned-tab.svg><link rel=manifest crossorigin=use-credentials href=/site.webmanifest><link rel="shortcut icon" href=/favicon.ico><title>NAS折腾记(5)：群晖硬盘休眠设置与分析</title><link rel=stylesheet href=https://razeencheng.com/css/style.min.a88782436067f84711b02510e9f09bd68bd49c25cd2e03624cd7320fa893b6ea.css integrity="sha256-qIeCQ2Bn+EcRsCUQ6fCb1ovUnCXNLgNiTNcyD6iTtuo=" crossorigin=anonymous></head><body id=page><header id=site-header><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://razeencheng.com>Razeen`s Blog</a></div><nav class="site-nav hide-in-mobile"><a href=https://razeencheng.com/posts/>文章</a>
<a href=https://razeencheng.com/tags/>标签</a>
<a href=https://razeencheng.com/categories/>分类</a>
<a href=https://razeencheng.com/about/>关于</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/razeencheng target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/razeencheng target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=菜单><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://razeencheng.com/posts/>文章</a></li><li><a href=https://razeencheng.com/tags/>标签</a></li><li><a href=https://razeencheng.com/categories/>分类</a></li><li><a href=https://razeencheng.com/about/>关于</a></li></ul></div><main class="site-main section-inner"><article class=thin><header class=post-header><div class=post-meta><span>Nov 4, 2022</span></div><h1>NAS折腾记(5)：群晖硬盘休眠设置与分析</h1></header><div class=content><p>NAS需要硬盘休眠么？群晖怎么才能硬盘休眠？ 这一期我们来聊聊硬盘休眠，同时分享一下我是怎么分析硬盘休眠的日志的，以及设置群晖系统休眠的。</p><p>这期我们从几个问题来入手。</p><h3 id=硬盘休眠有什么好处>硬盘休眠有什么好处？<a href=#硬盘休眠有什么好处 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>众所周知，机械硬盘工作的时候，由电机带动盘片高速转动，磁头依靠盘片的高速旋转引起的空气动力效应悬浮在盘片上。</p><p><img src=https://s.razeen.cn/images/2022/16676065956638.jpg alt></p><p>在不休眠的情况下，即使没有数据读写，为了保持较快的响应和磁头的悬浮，磁盘也会一直处于转动的状态，而且如果磁盘不支持降速的模式，磁盘都是以固定的转速在转动的。这时候的功率大概在8-10w.</p><p>而在停机或者休眠的时候，磁头回到停泊区，电机停止转动，消耗就很小了，功率大概在1w左右。</p><p>那么，可以看出，机械硬盘休眠，最大的好处应该就是省电。如果你的NAS上有5块硬盘，也就是说平均可以降低35w, 一天大概能省一度电。</p><p>当然，会有小伙伴说，这时候电机停止运转，磁头归位了，减少的电机/磁头的损耗，增加了硬盘的寿命，其实这个增加的还真不大，至少对我们来说，完全不用去操心的。反而是磁头的起停，它可能增加磁头损害的几率，这就有了如果频繁的休眠启动不如不休眠的说法。</p><p>其实影响磁盘寿命的更多的是温度，震动，磁场啥的。再说磁盘买来就是消耗的，其寿命我们就不用太过操心，买的时候买那种3年，5年质保的，平常数据多备份就好。</p><h3 id=你需要硬盘休眠么>你需要硬盘休眠么？<a href=#你需要硬盘休眠么 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>我在平台搜索了一下，关于NAS硬盘休眠的文章不多，群晖休眠视频更是没看到。那么说明一个问题，硬盘休眠可能不那么重要。</p><p>这是为什么呢？因为很多情况下，我们的机械硬盘是得不到休眠的。在折腾NAS的时候，我们会在NAS上跑一些影音刮削软件，Docker或者PT保种之类的。而这些软件总有一些定时任务，网络连接，日志写入等等，总之在不停的对硬盘进行读写，硬盘基本上是没有休息时间的。</p><p>那么，如果你也是这种折腾的用户,恭喜你，这篇文章看到这里就可以了。</p><p>当然，如果你不折腾，装NAS就是来存储数据，平常也就使用一些群晖自家的图片管理软件，VideoStation，也不用保种，下完即删 的这种，需求比较简单，完全就可以考虑设置一下硬盘休眠。</p><h3 id=群晖硬盘休眠设置>群晖硬盘休眠设置<a href=#群晖硬盘休眠设置 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>我先直接告诉大家怎么设置再讲分析，如果你按照我的设置方法不能生效，可以再看后面一节怎么分析。</p><h4 id=第一步关闭-dhcp>第一步、关闭 DHCP<a href=#第一步关闭-dhcp class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>DHCP 即动态主机设置协议，简单理解就是为插入路由器的设备动态分配IP的。这个分配的IP是有一个租赁时间的，时间到了后客户端需要重新续租，这时候机器就被唤醒了。</p><p>其实，我们家里固定的一些设备, 可以设置一个固定IP就好了，完全不用DHCP。</p><p>于是，这里我们将DHCP关掉，给他一个固定的IP。</p><p>打开 &ldquo;控制面板 > 网络 > 网络界面&rdquo;, 选择"网络界面"，选择下面的局域网连接，点击"编辑"。</p><p>点击 &ldquo;IPv4&rdquo;, 选择这个 &ldquo;手动设置网络配置&rdquo;。这里的IP你可以直接使用当前DHCP分配的这个IP，也可以自己设置一个，只要和局域网内其他设备不冲突就好。</p><p>如果你和我一样，有多个，就都修改一下。</p><p>然后确认保存。</p><p><img src=https://s.razeen.cn/images/2022/16674327611163.jpg alt></p><h4 id=第二步日志写入内存>第二步、日志写入内存<a href=#第二步日志写入内存 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>影响群晖休眠的还有第二个因素，就是日志。特别是黑群晖，如果有一些硬件的不兼容，系统会间歇或持续的输出错误日志，而这些日志是写入到磁盘的，这也就导致了磁盘无法休眠。</p><p>我这里可以将日志文件全部输出到内存中，将日志目录直接挂载到临时目录(临时目录默认挂载在内存中的)。</p><p>但这样还有一个问题，如果我们关机了，内存中的日志不就消失了么？所以这里我们又加了两个触发任务， 当开机的时候，将日志挂载到零时目录。当关机的时候，将日志拷贝到硬盘备份文件夹中。</p><p>打开 &ldquo;控制面板 > 计划任务&rdquo;, 点击"新增 > 触发的任务 > 用户自定义脚本"。</p><p>&ldquo;常规"这里，任务名称写一下，注意这个账户需要用root, 不然没有权限操作后面的脚本。
<img src=https://s.razeen.cn/images/2022/16675178428525.jpg alt></p><p>&ldquo;任务设置"这里，将下面的运行命令贴进去。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> ! -d <span class=s2>&#34;/var/logbak&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>     mkdir /var/logbak
</span></span><span class=line><span class=cl>     cp -a -f /var/log/.  /var/logbak/
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>cp -a -f /var/logbak/.  /tmp/log/
</span></span><span class=line><span class=cl>mount -B /tmp/log  /var/log
</span></span></code></pre></div><p>通知设置中，如果你配置了SMTP，可以和我一样勾选一下，填写邮箱，这样每次启动成功执行命令会给你发送一封邮件。</p><p>确认保存。</p><p><img src=https://s.razeen.cn/images/2022/16675179603525.jpg alt></p><p>同样，再次点击"新增 > 触发的任务 > 用户自定义脚本&rdquo;，这次"事件"我们选择关机，账户还是要用root。</p><p><img src=https://s.razeen.cn/images/2022/16675181824894.jpg alt></p><p>&ldquo;任务设置&rdquo; 这里一样，把下面的脚本粘贴进去。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp -a -f /tmp/log/.  /var/logbak
</span></span></code></pre></div><p><img src=https://s.razeen.cn/images/2022/16676073007755.jpg alt></p><p>确认保存。</p><h4 id=第三步开启硬盘休眠>第三步、开启硬盘休眠<a href=#第三步开启硬盘休眠 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>在"硬件和电源 > 硬盘休眠&rdquo; 中， 启用这个休眠。</p><p>这里的时间可以设置到20分钟，甚至半小时，防止我们自己操作，频繁的去唤醒。</p><p>然后应用保存。</p><p>如果要更好的观察休眠，可以把 “启用硬盘休眠日志” 勾选上。</p><p><img src=https://s.razeen.cn/images/2022/16675185530804.jpg alt></p><p>到这里我们的休眠设置就做完了。可以关闭页面，断开链接，等待一段时间，看看你的群晖是不是可以正常休眠了。</p><p>可以通过日志中心，搜索<code>woke up</code>来识别是否正常休眠。<code>woke up</code>是硬盘每次被唤醒就会输出这样一条日志。 如果频繁的<code>woke up</code>就还有问题。如果压根没<code>woke up</code>说明就没休眠。如果像我图片中这样，一天几次，基本都是我们使用的时候去唤醒的，那说明睡觉基本正常了。
<img src=https://s.razeen.cn/images/2022/16676008257530.jpg alt></p><p>当然，有朋友发现，即使做完了上面的三步，还是无法休眠。怎么办呢？这时候就要我们自己去分析一下是什么服务在读写硬盘了。</p><p>下面的一节我们就来看看硬盘不休眠的分析过程。</p><h3 id=日志分析>日志分析<a href=#日志分析 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><h4 id=开启休眠日志>开启休眠日志<a href=#开启休眠日志 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>在"硬件和电源 > 硬盘休眠" 中，启用硬盘休眠日志。</p><p>然后应用保存。</p><p><img src=https://s.razeen.cn/images/2022/16675187629721.jpg alt></p><p>在"技术支持中心 > 技术支持服务"，系统日志工具这里，启用系统休眠调试模式。</p><p>&ldquo;遇到问题&rdquo; 这里选择 &ldquo;无法休眠&rdquo;，应用即可。</p><p><img src=https://s.razeen.cn/images/2022/16675189169306.jpg alt></p><p>然后把网页，SMB服务等客户端全部关了，等待一天。</p><h4 id=分析日志>分析日志<a href=#分析日志 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>首先要在 &ldquo;控制面板 > 终端机和SNMP&rdquo; 中把SSH开启，并应用。</p><p><img src=https://s.razeen.cn/images/2022/16675991220711.jpg alt></p><p>然后我们将硬盘休眠的日志拷贝下来。日志文件在 <code>/var/log</code> 目录下。如果你熟悉 scp 命令，可以直接通过命令拷贝。</p><p>我这里就使用<code>WinSCP</code>软件来做展示。</p><p>打开<code>WinSCP</code>软件，文件协议选择"SCP", 主机名填写群晖的IP地址，用户名密码就是群晖的登陆密码。 填好后点击登陆。</p><p><img src=https://s.razeen.cn/images/2022/16676000064126.jpg alt></p><p>我们点击这个文件夹图标，选择打开目录。</p><p><img src=https://s.razeen.cn/images/2022/16676002480214.jpg alt></p><p>输入 <code>/var/log</code> 直接跳转到该目录下面。</p><p>往下拖，找到这几个文件，拖到左边的文件夹中。</p><p><img src=https://s.razeen.cn/images/2022/16676003411616.jpg alt></p><p>然后在左边的文件夹中找到这几个文件。用文本编辑器打开<code>hibernationFull.log</code>文件。</p><p><img src=https://s.razeen.cn/images/2022/16676006103796.jpg alt></p><p>打开文件一看8000多行，怎么看呢？我们利用排除法。</p><p>我们先将下面这样的行排除。sync程序是内核将脏数据落盘，而这个脏数据一般是用户态操做的结果，不是主动触发的。</p><pre tabindex=0><code>[226186.055466] ppid:6630(syno_hibernatio), pid:10639(sync), WRITE block 2213056 on dm-8 (32 sectors)
</code></pre><p>同样还有<code>kthreadd</code>这种内核调度的，如：</p><pre tabindex=0><code>[226193.396532] ppid:2(kthreadd), pid:5644(jbd2/md0-8), WRITE block 4527896 on md0 (8 sectors)
</code></pre><p>然后就是排除非写入硬盘的。如下面这种带有 <code>on tmpfs</code>,<code>on proc</code> 和 <code>on cgroup</code> 的。</p><pre tabindex=0><code>[226188.546357] ppid:1(systemd), pid:10668(synostgd-disk), dirtied inode 7354598 (temperature.tmp) on tmpfs
[226188.627252] ppid:1(systemd), pid:7698(irqbalance), dirtied inode 4026532190 (smp_affinity) on proc
</code></pre><p>接着我们就可以来分析剩下的内容了。如我这里的文件（为了展示类似的行我就删除了）：</p><pre tabindex=0><code>[226185.558637] ppid:1(systemd), pid:7729(synologrotated), dirtied subvolume 256 inode 31906 (.SMBXFERDB-shm) on dm-8
[226186.449574] ppid:1(systemd), pid:4292(EmbyServer), WRITE block 74240 on dm-8 (32 sectors)
[226188.534733] ata3: wake up successful, the reset fail can be ignored
[226188.543616] ata4: wake up from deepsleep, reset link now
[226191.559613] ata4: wake up successful, the reset fail can be ignored
[226193.396547] ppid:7729(synologrotated), pid:10646(logrotate), dirtied inode 401663 (logrotate.status.tmp) on md0
[226193.396551] ppid:1(systemd), pid:27845(syslog-ng), WRITE block 13236504 on md0 (8 sectors)
[226193.396555] ppid:1(systemd), pid:27845(syslog-ng), WRITE block 4647728 on md0 (8 sectors)
[226193.397410] ppid:7729(synologrotated), pid:10646(logrotate), WRITE block 13236552 on md0 (32 sectors)
[226193.598388] ppid:7729(synologrotated), pid:10646(logrotate), dirtied inode 404439 (?) on md0
[226193.598673] ppid:1(systemd), pid:27845(syslog-ng), dirtied inode 393912 (system) on md0
[226199.476489] ppid:11831(interfaceUpAdju), pid:12201(synonetdtool), dirtied inode 394012 (?) on md0
[226199.476496] ppid:1(systemd), pid:4292(EmbyServer), dirtied inode 31889 (embyserver.txt) on dm-8
[226199.476521] ppid:1(systemd), pid:4292(EmbyServer), WRITE block 8462896 on dm-8 (8 sectors)
uptime : [226225.649521]
</code></pre><p>就已这个来我们来分析一下。</p><ul><li><code>logrotate / synologrotated</code> ：系统记录日志或日志轮换的进行，一般正常休眠应该不会工作，不用管。</li><li><code>syslog-ng</code>: Nginx WEB页面/反向代理服务，这个可能是我中间访问了，不用管。</li><li><code>interfaceUpAdju</code>: 接口变动，这个应该是我动路由器的时候，动到了网线，把网重新插拔了，一般不会有，不用管。</li><li><code>EmbyServer</code> : 影音服务，感觉元凶找到了，应该是<code>EmbyServer</code>本身有一些定时任务，我们可以考虑去设置一下或者直接卸载==</li></ul><p>我这里直接把<code>EmbyServer</code>卸载了==， 当然你也可以看看服务有没有定时任务的设置开关，去手动设置一下，如我这里的<code>EmbyServer</code>, 可以把这些时间延长。</p><p><img src=https://s.razeen.cn/images/2022/16676062727309.jpg alt></p><p>经过将日志全部转移到内存，卸载了<code>EmbyServer</code>后，我的硬盘就可以正常休眠了。基本上不访问就不醒了。</p><p>如果你的经过一轮还不行，那就多观察几轮，找到最终唤醒磁盘的服务。</p><p>如果说，你喜欢折腾一些服务，或者挂个PT，开个博客，那把硬盘休眠直接关了吧。</p><p>好啦，这篇文章就到这里啦。感谢阅读。如果日志分析中，不知道那个进程是干什么的，可以在留言板上回复，我们一起来看看。</p><h3 id=视频版本>视频版本<a href=#视频版本 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3></div><div class="related-posts thin"><h2>相关推荐</h2><ul><li><a href=/posts/nas-04-hack-synology-install/>NAS折腾记(4)： 20分钟手把手带你完美安装 DS918+ 黑群晖7.1.1</a></li><li><a href=/posts/nas-03-assemble/>NAS折腾记(3)：NAS 装机</a></li><li><a href=/posts/nas-02-mainboard/>NAS折腾记(2)：B360-ITX 双M.2 双2.5G网口 6 SATA主版 开箱</a></li><li><a href=/posts/nas-01-unboxing/>NAS折腾记(1)：328元的4盘位Nas机箱开箱</a></li><li><a href=/posts/homelib-001-synology-hackintosh/>Homelib (1)：5分钟上手黑群晖 NAS</a></li></ul></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://razeencheng.com/tags/homelib>homelib</a></span><span class=tag><a href=https://razeencheng.com/tags/nas>nas</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>3438 字</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2022-11-04 21:22 +0000</p></footer></article><aside id=toc class=show-toc><div class=toc-title>目录</div><nav id=TableOfContents><ul><li><ul><li><a href=#硬盘休眠有什么好处>硬盘休眠有什么好处？</a></li><li><a href=#你需要硬盘休眠么>你需要硬盘休眠么？</a></li><li><a href=#群晖硬盘休眠设置>群晖硬盘休眠设置</a></li><li><a href=#日志分析>日志分析</a></li><li><a href=#视频版本>视频版本</a></li></ul></li></ul></nav></aside><div class="post-nav thin"><a class=next-post href=https://razeencheng.com/posts/nas-07-syno-hack/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;新</span><br><span>NAS折腾记(6)：黑群晖系统安装好后怎么洗白？</span></a>
<a class=prev-post href=https://razeencheng.com/posts/nas-04-hack-synology-install/><span class=post-nav-label>旧&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>NAS折腾记(4)： 20分钟手把手带你完美安装 DS918+ 黑群晖7.1.1</span></a></div><div id=google-ads class=thin><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4450478767591566" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4450478767591566 data-ad-slot=8164928618 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div id=comments class=thin><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//razeen-me.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer id=site-footer class="section-inner thin"><p>&copy; 2017 - 2022 <a href=https://razeencheng.com>Razeen</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://razeencheng.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://s.razeen.cn/assets/js/mermaid.min.js></script>
<script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(e=>{e.parentElement.outerHTML=`<div class="mermaid">${e.innerText}</div>`})</script><script src=https://razeencheng.com/js/main.min.4e6345981f1ff315bbb7afa61eacf413923b536e5a4d5b22f698d96b624d48c4.js integrity="sha256-TmNFmB8f8xW7t6+mHqz0E5I7U25aTVsi9pjZa2JNSMQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4BKH11NSEY"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4BKH11NSEY")</script></body></html>