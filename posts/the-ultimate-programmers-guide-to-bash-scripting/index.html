<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="终极 Bash 脚本指南"><meta itemprop=description content="在开发的过程中，经常需要处理一些重复的工作，或者逻辑相当简单但耗时的功能，这时我们可能会考虑到用脚本来自动化完成这些工作。而 Bash 脚本是我们最容易接触到和上手的脚本语言。
这篇博客汇总一些常用的 Bash 语法，方便日后查阅学习。"><meta itemprop=datePublished content="2021-02-01T19:46:58+00:00"><meta itemprop=dateModified content="2021-02-01T19:46:58+00:00"><meta itemprop=wordCount content="5075"><meta itemprop=image content="https://razeencheng.com/android-chrome-192x192.png"><meta itemprop=keywords content="shell,bash,"><meta property="og:title" content="终极 Bash 脚本指南"><meta property="og:description" content="在开发的过程中，经常需要处理一些重复的工作，或者逻辑相当简单但耗时的功能，这时我们可能会考虑到用脚本来自动化完成这些工作。而 Bash 脚本是我们最容易接触到和上手的脚本语言。
这篇博客汇总一些常用的 Bash 语法，方便日后查阅学习。"><meta property="og:type" content="article"><meta property="og:url" content="https://razeencheng.com/posts/the-ultimate-programmers-guide-to-bash-scripting/"><meta property="og:image" content="https://razeencheng.com/android-chrome-192x192.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-01T19:46:58+00:00"><meta property="article:modified_time" content="2021-02-01T19:46:58+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://razeencheng.com/android-chrome-192x192.png"><meta name=twitter:title content="终极 Bash 脚本指南"><meta name=twitter:description content="在开发的过程中，经常需要处理一些重复的工作，或者逻辑相当简单但耗时的功能，这时我们可能会考虑到用脚本来自动化完成这些工作。而 Bash 脚本是我们最容易接触到和上手的脚本语言。
这篇博客汇总一些常用的 Bash 语法，方便日后查阅学习。"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=mask-icon href=/safari-pinned-tab.svg><link rel=manifest crossorigin=use-credentials href=/site.webmanifest><link rel="shortcut icon" href=/favicon.ico><title>终极 Bash 脚本指南</title><link rel=stylesheet href=https://razeencheng.com/css/style.min.a88782436067f84711b02510e9f09bd68bd49c25cd2e03624cd7320fa893b6ea.css integrity="sha256-qIeCQ2Bn+EcRsCUQ6fCb1ovUnCXNLgNiTNcyD6iTtuo=" crossorigin=anonymous></head><body id=page><header id=site-header><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://razeencheng.com>Razeen`s Blog</a></div><nav class="site-nav hide-in-mobile"><a href=https://razeencheng.com/posts/>文章</a>
<a href=https://razeencheng.com/tags/>标签</a>
<a href=https://razeencheng.com/categories/>分类</a>
<a href=https://razeencheng.com/about/>关于</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/razeencheng target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/razeencheng target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=菜单><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://razeencheng.com/posts/>文章</a></li><li><a href=https://razeencheng.com/tags/>标签</a></li><li><a href=https://razeencheng.com/categories/>分类</a></li><li><a href=https://razeencheng.com/about/>关于</a></li></ul></div><main class="site-main section-inner"><article class=thin><header class=post-header><div class=post-meta><span>Feb 1, 2021</span></div><h1>终极 Bash 脚本指南</h1></header><div class=content><p>在开发的过程中，经常需要处理一些重复的工作，或者逻辑相当简单但耗时的功能，这时我们可能会考虑到用脚本来自动化完成这些工作。而 Bash 脚本是我们最容易接触到和上手的脚本语言。</p><p>这篇博客汇总一些常用的 Bash 语法，方便日后查阅学习。</p><h3 id=hello-world>hello world<a href=#hello-world class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>不管写啥，上来先输出个<code>hello world</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello world&#34;</span>
</span></span></code></pre></div><p>创建一个文件<code>hello.sh</code> 包含以上内容，同时赋予执行权限，然后执行，一个<code>hello world</code> 就好了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 添加执行权限</span>
</span></span><span class=line><span class=cl>$ chmod +x hello.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ ./hello.sh
</span></span><span class=line><span class=cl>hello world
</span></span></code></pre></div><h3 id=解释器>解释器<a href=#解释器 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>我们看到这个<code>hello.sh</code> 脚本，第一行有个 <code>#!/bin/bash</code> 。 这个是用来指定该脚本在 UNIX/Linux 下执行时用到的解释器。</p><p>执行<code>cat /etc/shells</code> 我们可以看到自己的系统中都有哪些解释器。如我的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat /etc/shells
</span></span><span class=line><span class=cl><span class=c1># /etc/shells: valid login shells</span>
</span></span><span class=line><span class=cl>/bin/sh
</span></span><span class=line><span class=cl>/bin/bash
</span></span><span class=line><span class=cl>/usr/bin/bash
</span></span><span class=line><span class=cl>/bin/rbash
</span></span><span class=line><span class=cl>/usr/bin/rbash
</span></span><span class=line><span class=cl>/bin/dash
</span></span><span class=line><span class=cl>/usr/bin/dash
</span></span><span class=line><span class=cl>/bin/zsh
</span></span><span class=line><span class=cl>/usr/bin/zsh
</span></span><span class=line><span class=cl>/usr/bin/tmux
</span></span></code></pre></div><h3 id=注释>注释<a href=#注释 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>用 <code>#</code> 来注释。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># 这是注释</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello world&#34;</span>
</span></span></code></pre></div><h3 id=变量声明>变量声明<a href=#变量声明 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>Bash 中变量命名是大小写敏感的，很多喜欢全大写。当然你也可以使用 小写英文字母，数字和下划线，但不能以数字开头。 给变量赋值的时候 <code>=</code> 号前后不能有空格。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 有效的</span>
</span></span><span class=line><span class=cl><span class=nv>FIRSTLETTERS</span><span class=o>=</span><span class=s2>&#34;ABC&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>FIRST_THREE_LETTERS</span><span class=o>=</span><span class=s2>&#34;ABC&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>firstThreeLetters</span><span class=o>=</span><span class=s2>&#34;ABC&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>MY_SHELL</span><span class=o>=</span><span class=s2>&#34;bash&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>my_another_shell</span><span class=o>=</span><span class=s2>&#34;my another shell&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>My_Shell</span><span class=o>=</span><span class=s2>&#34;My shell&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>_myshell</span><span class=o>=</span><span class=s2>&#34;My shell&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 无效的</span>
</span></span><span class=line><span class=cl><span class=nv>3LETTERS</span><span class=o>=</span><span class=s2>&#34;ABC&#34;</span>
</span></span><span class=line><span class=cl>first-three-letters<span class=o>=</span><span class=s2>&#34;ABC&#34;</span>
</span></span><span class=line><span class=cl>first@Thtree@Letters<span class=o>=</span><span class=s2>&#34;ABC&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ABC</span> <span class=o>=</span> <span class=s2>&#34;ABC &#34;</span>
</span></span><span class=line><span class=cl><span class=nv>MY_SHELL</span> <span class=o>=</span> <span class=s2>&#34;bash&#34;</span>
</span></span><span class=line><span class=cl>My-SHELL<span class=o>=</span><span class=s2>&#34;bash&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>1MY_SHELL</span><span class=o>=</span><span class=s2>&#34;My shell&#34;</span>
</span></span></code></pre></div><h3 id=变量引用>变量引用<a href=#变量引用 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>当你要使用变量的时候，用 <code>$</code> 来引用， 如果后面要接一些其他字符，可以用<code>{}</code> 括起来。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>WORLD</span><span class=o>=</span><span class=s2>&#34;world world&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello </span><span class=nv>$WORLD</span><span class=s2>&#34;</span>  <span class=c1># hello world world</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello </span><span class=si>${</span><span class=nv>WORLD</span><span class=si>}</span><span class=s2>2&#34;</span> <span class=c1># hello world world2</span>
</span></span></code></pre></div><p>在 Bash 中要注意 单引号 <code>'</code> , 双引号 <code>"</code> ,反引号 ` 的区别。</p><p>单引号，双引号都能用来保留引号内的为文字值，其差别在于，双引号在遇到 <code>$(参数替换)</code> , 反引号 `(命令替换) 的时候有例外，单引号则剥夺其中所有字符的特殊含义。</p><p>而反引号的作用 和 <code>$()</code> 是差不多的。 在执行一条命令的时候，会先执行其中的命令，再把结果放到原命令中。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>var</span><span class=o>=</span><span class=s2>&#34;music&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>sports</span><span class=o>=</span><span class=s1>&#39;sports&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;I like </span><span class=nv>$var</span><span class=s2>&#34;</span>   <span class=c1># I like music</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;I like </span><span class=si>${</span><span class=nv>var</span><span class=si>}</span><span class=s2>&#34;</span> <span class=c1># I like music</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> I like <span class=nv>$var</span>     <span class=c1># I like music</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;I like $var&#39;</span>   <span class=c1># I like $var</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;I like \$var&#34;</span>  <span class=c1># I like $var</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;I like \$var&#39;</span>  <span class=c1># I like \$var</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=sb>`</span>bash -version<span class=sb>`</span> <span class=c1># GNU bash, version 5.0.17(1)-release (x86_64-pc-linux-gnu)...</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;bash -version&#39;</span> <span class=c1># bash -version</span>
</span></span></code></pre></div><h3 id=环境变量>环境变量<a href=#环境变量 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>Linux 的环境变量包含了存储在系统中的信息。我们可以在终端中找到一些环境变量。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ env 
</span></span><span class=line><span class=cl><span class=c1># 或</span>
</span></span><span class=line><span class=cl>$ printenv
</span></span></code></pre></div><p>你可以在脚本中引用这些环境变量。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>echo</span> <span class=nv>$SHELL</span>, <span class=nv>$USER</span>, <span class=nv>$HOME</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># /usr/bin/zsh, razeen, /home/razeen</span>
</span></span></code></pre></div><p><a href=https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html>这里</a> 还有更多。</p><h3 id=内部变量>内部变量<a href=#内部变量 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>Bash 的内部变量也不少，有时我们可能会用到，如 <code>$BASHPID</code> <code>$IFS</code> <code>$PWD</code> 等，更多看<a href=https://tldp.org/LDP/abs/html/internalvariables.html>这里</a> 。</p><h3 id=将命令输出分配给变量>将命令输出分配给变量<a href=#将命令输出分配给变量 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>可以使用 <code>$(command)</code> 将命令输出存储在变量中。例如这是一个<code>info.sh</code>脚本内容:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>LIST</span><span class=o>=</span><span class=k>$(</span>ls -l<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;File information: </span><span class=nv>$LIST</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>执行（别忘了给执行权限）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./info.sh
</span></span><span class=line><span class=cl>File information: total <span class=m>8</span>
</span></span><span class=line><span class=cl>-rwxrwxr-x <span class=m>1</span> razeen razeen <span class=m>85</span> 2月   <span class=m>5</span> 07:35 hello.sh
</span></span><span class=line><span class=cl>-rwxrwxr-x <span class=m>1</span> razeen razeen <span class=m>58</span> 2月   <span class=m>5</span> 07:36 info.sh
</span></span></code></pre></div><p>下面的脚本会将时间和日期，用户名以及系统正常运行时间保存到日志文件中。</p><p>其中 <code>></code> 是重定向之一，它将覆盖文件。使用 <code>>></code> 可以将输出追加到文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>DATE</span><span class=o>=</span><span class=k>$(</span>date -u<span class=k>)</span> <span class=c1># UTC 时间#!/bin/bash</span>
</span></span><span class=line><span class=cl><span class=nv>DATE</span><span class=o>=</span><span class=k>$(</span>date -u<span class=k>)</span> <span class=c1># UTC 时间</span>
</span></span><span class=line><span class=cl><span class=nv>WHO</span><span class=o>=</span><span class=k>$(</span>whoami<span class=k>)</span> <span class=c1># 用户名</span>
</span></span><span class=line><span class=cl><span class=nv>UPTIME</span><span class=o>=</span><span class=k>$(</span>uptime<span class=k>)</span> <span class=c1># 系统运行时间</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Today is </span><span class=nv>$DATE</span><span class=s2>. You are </span><span class=nv>$WHO</span><span class=s2>. Uptime info: </span><span class=nv>$UPTIME</span><span class=s2>&#34;</span> &gt; logfile
</span></span><span class=line><span class=cl><span class=nv>WHO</span><span class=o>=</span><span class=k>$(</span>whoami<span class=k>)</span> <span class=c1># 用户名</span>
</span></span><span class=line><span class=cl><span class=nv>UPTIME</span><span class=o>=</span><span class=k>$(</span>uptime<span class=k>)</span> <span class=c1># 系统运行时间</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Today is </span><span class=nv>$DATE</span><span class=s2>. You are </span><span class=nv>$WHO</span><span class=s2>. Uptime info: </span><span class=nv>$UPTIME</span><span class=s2>&#34;</span> &gt; logfile
</span></span></code></pre></div><p><img src=https://s.razeen.cn/images/2021/20210205074148_image-20210205074148588.png alt=image-20210205074148588></p><h3 id=内建命令>内建命令<a href=#内建命令 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p><code>Shell</code> 内建命令是可以直接在<code>Shell</code>中运行的命令。可以这么查看内建命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>compgen</span> -b <span class=p>|</span> sort
</span></span><span class=line><span class=cl>-
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>:
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span>
</span></span><span class=line><span class=cl>autoload
</span></span><span class=line><span class=cl><span class=nb>bg</span>
</span></span><span class=line><span class=cl>bindkey
</span></span><span class=line><span class=cl><span class=nb>break</span>
</span></span><span class=line><span class=cl><span class=nb>builtin</span>
</span></span><span class=line><span class=cl>bye
</span></span><span class=line><span class=cl><span class=nb>cd</span>
</span></span></code></pre></div><p>也可以用 <code>type</code> 查看命令的类型。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>type</span> <span class=nb>cd</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> is a shell <span class=nb>builtin</span>
</span></span></code></pre></div><p>可以用 <code>which</code> 命令查看可执行文件的文件路径：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># which sort</span>
</span></span><span class=line><span class=cl>/usr/bin/sort
</span></span></code></pre></div><p>可通过 <code>man builtins</code> 查看内建命令的详细描述。</p><h3 id=测试>测试<a href=#测试 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><h4 id=if条件表达式>IF条件表达式<a href=#if条件表达式 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p><code>if</code> 后面需要接者<code>then</code>：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-for-test <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span>
</span></span><span class=line><span class=cl>  ...
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>或者，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-for-test <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span>
</span></span><span class=line><span class=cl>  ...
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span> 
</span></span><span class=line><span class=cl><span class=nv>VAR</span><span class=o>=</span>myvar
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR</span> <span class=o>=</span> myvar <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;1: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 1: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR</span><span class=s2>&#34;</span> <span class=o>=</span> myvar <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;2: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 2: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR</span> <span class=o>=</span> <span class=s2>&#34;myvar&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;3: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 3: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;myvar&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;4: \$VAR is </span><span class=nv>$VAR</span><span class=s2>&#34;</span>   <span class=c1># 4: $VAR is myvar</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>上面，我们在比较时，可以用双引号把变量引用起来。</p><p>但要注意单引号的使用。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>VAR</span><span class=o>=</span>myvar
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s1>&#39;$VAR&#39;</span> <span class=o>=</span> <span class=s1>&#39;myvar&#39;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s1>&#39;5a: $VAR is $VAR&#39;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;5b: Not equal.&#34;</span>
</span></span><span class=line><span class=cl>fibas
</span></span><span class=line><span class=cl><span class=c1># Output:</span>
</span></span><span class=line><span class=cl><span class=c1># 5b: Not equal.</span>
</span></span></code></pre></div><p>上面这个就把 &lsquo;$VAR&rsquo; 当一个字符串了。</p><p>但如果变量是多个单词，我们就必须用到双引号了，如</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># 这样写就有问题</span>
</span></span><span class=line><span class=cl><span class=nv>VAR1</span><span class=o>=</span><span class=s2>&#34;my var&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR1</span> <span class=o>=</span> <span class=s2>&#34;my var&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\$VAR1 is </span><span class=nv>$VAR1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># error [: too many arguments</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 用双引号</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR1</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;my var&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\$VAR1 is </span><span class=nv>$VAR1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>总的来说，双引号可以一直加上。</p><h4 id=空格问题>空格问题<a href=#空格问题 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>比较表达式中，如果<code>=</code>前后没有空格，那么整个表法式会被认为是一个单词，其判断结果为<code>True</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span> 
</span></span><span class=line><span class=cl><span class=nv>VAR2</span><span class=o>=</span><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=c1>#  由于被识别成一个单词， [] 里面为 true</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2>&#34;</span><span class=o>=</span><span class=m>1</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 2 is 1.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 前后加上空格就好了</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=m>1</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 2 is not 1.</span>
</span></span></code></pre></div><p>另外需要注意的是， 在判断中，中括号 <code>[</code> 和变量之间一定要有一个空格，<code>=</code> 或者 <code>==</code>。 如果缺少了空格，你可能会到这类似这样的错误：<code>unary operator expected’ or missing </code>]` 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 正确， 符号前后有空格</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$VAR2</span> <span class=o>=</span> <span class=m>1</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\$VAR2 is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;It&#39;s not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 2 is 1.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 错误， 符号前后无空格</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span><span class=nv>$VAR2</span><span class=o>=</span>1<span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VAR2</span><span class=s2> is 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;It&#39;s not 1.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># line 3: =1: command not found</span>
</span></span><span class=line><span class=cl><span class=c1># line 5: [=1]: command not found</span>
</span></span><span class=line><span class=cl><span class=c1># It&#39;s not 1.</span>
</span></span></code></pre></div><h4 id=文件测试表达式>文件测试表达式<a href=#文件测试表达式 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>对文件进行相关测试，判断的表达式如下：</p><table><thead><tr><th style=text-align:left>表达式</th><th style=text-align:left>True</th></tr></thead><tbody><tr><td style=text-align:left><em>file1</em> -nt <em>file2</em></td><td style=text-align:left><em>file1</em> 比 <em>file2</em> 新。</td></tr><tr><td style=text-align:left><em>file1</em> -ot <em>file2</em></td><td style=text-align:left><em>file1</em> 比 <em>file2</em> 老。</td></tr><tr><td style=text-align:left>-d <em>file</em></td><td style=text-align:left>文件<em>file</em>存在，且是一个文件夹。</td></tr><tr><td style=text-align:left>-e <em>file</em></td><td style=text-align:left>文件 <em>file</em> 存在。</td></tr><tr><td style=text-align:left>-f <em>file</em></td><td style=text-align:left>文件<em>file</em>存在，且为普通文件。</td></tr><tr><td style=text-align:left>-L <em>file</em></td><td style=text-align:left>文件<em>file</em>存在，且为符号连接。</td></tr><tr><td style=text-align:left>-O <em>file</em></td><td style=text-align:left>文件 <em>flle</em> 存在, 且由有效用户ID拥有。</td></tr><tr><td style=text-align:left>-r <em>file</em></td><td style=text-align:left>文件 <em>flle</em> 存在, 且是一个可读文件。</td></tr><tr><td style=text-align:left>-s <em>file</em></td><td style=text-align:left>文件 <em>flle</em> 存在, 且长度大于0。</td></tr><tr><td style=text-align:left>-w file</td><td style=text-align:left>文件 <em>flle</em> 可写入。</td></tr><tr><td style=text-align:left>-x file</td><td style=text-align:left>文件 <em>flle</em> 可写执行。</td></tr></tbody></table><p>可以使用<code>man test</code>查看那详细的说明。</p><p>当表达式为<code>True</code>时，测试命令返回退出状态 0，而表达式为<code>False</code>时返回退出状态1。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>FILE</span><span class=o>=</span><span class=s2>&#34;/etc/resolv.conf&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -e <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span> -f <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2> is a file.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>fi</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span> -d <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2> is a directory.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>fi</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>[</span> -r <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>      <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2> is readable.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h4 id=字符串比较表达式>字符串比较表达式<a href=#字符串比较表达式 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><table><thead><tr><th style=text-align:left>表达式</th><th style=text-align:left>True</th></tr></thead><tbody><tr><td style=text-align:left><em>string1 = string2</em> 或 <em>string1 == string2</em></td><td style=text-align:left>两字符相等</td></tr><tr><td style=text-align:left><em>string1</em> != <em>string2</em></td><td style=text-align:left>两个字符串不相等</td></tr><tr><td style=text-align:left><em>string1</em> > <em>string2</em></td><td style=text-align:left><em>string1</em> 大于 <em>string2</em>.</td></tr><tr><td style=text-align:left><em>string1</em> &lt; <em>string2</em></td><td style=text-align:left><em>string1</em> 小于<em>string2</em>.</td></tr><tr><td style=text-align:left>-n <em>string</em></td><td style=text-align:left>字符串长度大于0</td></tr><tr><td style=text-align:left>-z <em>string</em></td><td style=text-align:left>字符串长度等于0</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>STRING</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -z <span class=s2>&#34;</span><span class=nv>$STRING</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;There is no string.&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span> 
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># There is no string.</span>
</span></span></code></pre></div><p>其中<code>>&2</code>将错误信息定位到标准错误输出。</p><h4 id=数字比较表达式>数字比较表达式<a href=#数字比较表达式 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>下面这些是用来比较数字的一些表达式。</p><table><thead><tr><th style=text-align:left>[&mldr;]</th><th style=text-align:left>((&mldr;))</th><th style=text-align:left>True</th></tr></thead><tbody><tr><td style=text-align:left>[ &ldquo;int1&rdquo; -eq &ldquo;int2&rdquo; ]</td><td style=text-align:left>(( &ldquo;int1&rdquo; == &ldquo;int2&rdquo; ))</td><td style=text-align:left>相等.</td></tr><tr><td style=text-align:left>[ &ldquo;int1&rdquo; -nq &ldquo;int2&rdquo; ]</td><td style=text-align:left>(( &ldquo;int1&rdquo; != &ldquo;int2&rdquo; ))</td><td style=text-align:left>不等.</td></tr><tr><td style=text-align:left>[ &ldquo;int1&rdquo; -lt &ldquo;int2&rdquo; ]</td><td style=text-align:left>(( &ldquo;int1&rdquo; &lt; &ldquo;int2&rdquo; ))</td><td style=text-align:left>int2 大于 int1.</td></tr><tr><td style=text-align:left>[ &ldquo;int1&rdquo; -le &ldquo;int2&rdquo; ]</td><td style=text-align:left>(( &ldquo;int1&rdquo; &lt;= &ldquo;int2&rdquo; ))</td><td style=text-align:left>int2 大于等于 int1.</td></tr><tr><td style=text-align:left>[ &ldquo;int1&rdquo; -gt &ldquo;int2&rdquo; ]</td><td style=text-align:left>(( &ldquo;int1 > &ldquo;int2&rdquo; ))</td><td style=text-align:left>int1 大于 int2</td></tr><tr><td style=text-align:left>[ &ldquo;int1&rdquo; -ge &ldquo;int2&rdquo; ]</td><td style=text-align:left>(( &ldquo;int1 >= &ldquo;int2&rdquo; ))</td><td style=text-align:left>int1 大于等于 int2</td></tr></tbody></table><h4 id=双括号->双括号 <code>(())</code><a href=#双括号- class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>数值的比较或者计算可以用<code>((... ))</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>a</span><span class=o>=</span><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=nv>b</span><span class=o>=</span><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=nv>c</span><span class=o>=</span><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>((</span><span class=s2>&#34;</span><span class=nv>$a</span><span class=s2>&#34;</span> &lt; <span class=s2>&#34;</span><span class=nv>$b</span><span class=s2>&#34;</span><span class=o>))</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> is less than </span><span class=nv>$b</span><span class=s2>.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> is not less than </span><span class=nv>$b</span><span class=s2>.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>((</span><span class=s2>&#34;</span><span class=nv>$a</span><span class=s2>&#34;</span> !<span class=o>=</span> <span class=s2>&#34;</span><span class=nv>$c</span><span class=s2>&#34;</span><span class=o>))</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> is not equal to </span><span class=nv>$c</span><span class=s2>.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> is equal to </span><span class=nv>$c</span><span class=s2>.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 计算</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> + </span><span class=nv>$b</span><span class=s2> = </span><span class=k>$((</span><span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=k>))</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 3 is less than 4.</span>
</span></span><span class=line><span class=cl><span class=c1># 3 is equal to 3.</span>
</span></span><span class=line><span class=cl><span class=c1># 3 + 4 = 7</span>
</span></span></code></pre></div><h3 id=怎么使用-ifelse-和-ifelifelse>怎么使用 if/else 和 if/elif/else<a href=#怎么使用-ifelse-和-ifelifelse class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>其实上面已经展示了不少了，这里总结下<code>if...else</code> 和 <code>if...elif...else</code> 语句。</p><p><code>if/else</code> 语句格式如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-is-true <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> A
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> B
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 或</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-is-true <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> A
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> B
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>例如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>MY_SHELL</span><span class=o>=</span><span class=s2>&#34;csh&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$MY_SHELL</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;bash&#34;</span> <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;You are using the bash shell.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;You are not using the bash shell.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p><code>if/elif/else</code> 语句格式如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-is-true <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> A
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[</span> condition-is-true <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> B
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> C
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition-is-true <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> A
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[</span> condition-is-true <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> B
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> C
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>MY_SHELL</span><span class=o>=</span><span class=s2>&#34;csh&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$MY_SHELL</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;bash&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;You are using the bash shell.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$MY_SHELL</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;csh&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;You are using csh.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;You are not using the bash shell.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h3 id=双中括号的使用>双中括号的使用<code>[[]]</code><a href=#双中括号的使用 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>如用用于比较的变量不是单个单词，就需要<code>[[]]</code> , 或者用单中括号(这时需要加双引号)。 在平常的使用中，最好都使用<code>[[]]</code>。</p><p>与单中括号相比，双中括号具有其他功能。 如，可以对其中正则使用逻辑<code>&&</code>和<code>||</code>和<code>=〜</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>VAR1</span><span class=o>=</span><span class=s2>&#34;variable&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>VAR2</span><span class=o>=</span><span class=s2>&#34;variable 2&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=o>(</span><span class=nv>VAR1</span> <span class=o>==</span> <span class=s2>&#34;variable&#34;</span><span class=o>)</span>  <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;They are the same.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Not the same.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用 &amp;&amp;</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> <span class=o>(</span><span class=nv>$VAR1</span> <span class=o>==</span> variable<span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=o>(</span>
</span></span><span class=line><span class=cl><span class=nv>$VAR2</span> <span class=o>==</span> <span class=s2>&#34;variable 2&#34;</span><span class=o>)</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;They are the same again.&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>digit</span><span class=o>=</span><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=nv>$digit</span> <span class=o>=</span>~ <span class=o>[</span>0-9<span class=o>]</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$digit</span><span class=s2> is a digit&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$digit</span><span class=s2> isn&#39;t a digit&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=nv>letter</span><span class=o>=</span><span class=s2>&#34;abc&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=nv>$letter</span> <span class=o>=</span>~ <span class=o>[</span>0-9<span class=o>]</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$letter</span><span class=s2> is a digit&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$letter</span><span class=s2> isn&#39;t a digit&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># 4 is a digit</span>
</span></span><span class=line><span class=cl><span class=c1># abc isn&#39;t a digit</span>
</span></span></code></pre></div><h3 id=怎么使用-for-循环>怎么使用 For 循环<a href=#怎么使用-for-循环 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p><code>for</code>循环的使用如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>for</span> VARIABLE_NAME in ITEM_1 ITEM_N
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>command</span> A
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>例如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>for</span> COLOR in red green blue
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;COLOR: </span><span class=nv>$COLOR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># COLOR: red</span>
</span></span><span class=line><span class=cl><span class=c1># COLOR: green</span>
</span></span><span class=line><span class=cl><span class=c1># COLOR: blue</span>
</span></span></code></pre></div><p>可以在其中使用变量，如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>COLORS</span><span class=o>=</span><span class=s2>&#34;red green blue&#34;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> COLOR in <span class=nv>$COLORS</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;COLOR: </span><span class=nv>$COLOR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><h4 id=用-for-循环重命名文件>用 <code>for</code> 循环重命名文件<a href=#用-for-循环重命名文件 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>我们举个简单的例子，用<code>for</code>循环重命名当前目录下的jpg图片。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>IMGS</span><span class=o>=</span><span class=k>$(</span>ls *jpg<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>DATE</span><span class=o>=</span><span class=k>$(</span>date +%F<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> IMG in <span class=nv>$IMGS</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Renaming </span><span class=si>${</span><span class=nv>IMG</span><span class=si>}</span><span class=s2> to </span><span class=si>${</span><span class=nv>DATE</span><span class=si>}</span><span class=s2>-</span><span class=si>${</span><span class=nv>IMG</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  mv <span class=si>${</span><span class=nv>IMG</span><span class=si>}</span> <span class=si>${</span><span class=nv>DATE</span><span class=si>}</span>-<span class=si>${</span><span class=nv>IMG</span><span class=si>}</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p><img src=https://s.razeen.cn/images/2021/20210213170152_image-20210213170152011.png alt=image-20210213170152011></p><h3 id=怎么传参>怎么传参<a href=#怎么传参 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>执行脚本的时候，后面可以跟着很多参数，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ scriptname param1 param2 param3
</span></span></code></pre></div><p><code>param1</code> 到 <code>param3</code> 称为可选参数， 可以在脚本中用 <code>$0</code>, <code>$1</code>, <code>$2</code>等，来引用这些参赛。例如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>echo</span> <span class=s2>&#34;&#39;\$0&#39; is </span><span class=nv>$0</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#39;\$1&#39; is </span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#39;\$2&#39; is </span><span class=nv>$2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#39;\$3&#39; is </span><span class=nv>$3</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>输出:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./param.sh
</span></span><span class=line><span class=cl><span class=s1>&#39;$0&#39;</span> is ./param.sh
</span></span><span class=line><span class=cl><span class=s1>&#39;$1&#39;</span> is
</span></span><span class=line><span class=cl><span class=s1>&#39;$2&#39;</span> is
</span></span><span class=line><span class=cl><span class=s1>&#39;$3&#39;</span> is
</span></span></code></pre></div><p><code>$0</code> 参数0返回的是当前执行文件的名字，包括路径。</p><p>可以用 <code>$@</code> 接受所以的参数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>for</span> PARAM in <span class=nv>$@</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Param is: </span><span class=nv>$PARAM</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>Using this script:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./params.sh a b c d e f
</span></span><span class=line><span class=cl>Param is: a
</span></span><span class=line><span class=cl>Param is: b
</span></span><span class=line><span class=cl>Param is: c
</span></span><span class=line><span class=cl>Param is: d
</span></span><span class=line><span class=cl>Param is: e
</span></span><span class=line><span class=cl>Param is: f
</span></span></code></pre></div><h3 id=怎么接收用户输入>怎么接收用户输入<a href=#怎么接收用户输入 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>用户输入称为<code>STDIN</code>。可以将<code>read</code>命令与<code>-p</code>（提示）选项一起使用来读取用户输入，它将输出提示字符串。 <code>-r</code> 选项不允许反斜杠转义任何字符。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>read</span> -rp <span class=s2>&#34;PROMPT&#34;</span> VARIABLE
</span></span></code></pre></div><p>例如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>read</span> -rp <span class=s2>&#34;Enter your programming languages: &#34;</span> PROGRAMMES
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Your programming languages are: &#34;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> PROGRAMME in <span class=nv>$PROGRAMMES</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$PROGRAMME</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>运行:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./read.sh
</span></span><span class=line><span class=cl>Enter your programming languages: go py
</span></span><span class=line><span class=cl>Your programming languages are:
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>py
</span></span></code></pre></div><h3 id=用大括号来表示范围->用大括号来表示范围 <code>{}</code><a href=#用大括号来表示范围- class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>如下所示，我们可以用大括号来表所一个数字或字母的范围。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=o>{</span>0..3<span class=o>}</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=o>{</span>a..d<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># output: </span>
</span></span><span class=line><span class=cl><span class=c1># 0 1 2 3</span>
</span></span><span class=line><span class=cl><span class=c1># a b c d</span>
</span></span></code></pre></div><p>你也可以在 <code>for</code> 循环中这么使用:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>for</span> i in <span class=o>{</span>0..9<span class=o>}</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=k>do</span> 
</span></span><span class=line><span class=cl>  touch file_<span class=s2>&#34;</span><span class=nv>$i</span><span class=s2>&#34;</span>.txt<span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>This will create different file names with different modification times.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls -al file_*
</span></span><span class=line><span class=cl>-rw-rw-r-- <span class=m>1</span> razeen razeen <span class=m>0</span> 2月  <span class=m>14</span> 09:54 file_0.txt
</span></span><span class=line><span class=cl>-rw-rw-r-- <span class=m>1</span> razeen razeen <span class=m>0</span> 2月  <span class=m>14</span> 09:54 file_1.txt
</span></span><span class=line><span class=cl>-rw-rw-r-- <span class=m>1</span> razeen razeen <span class=m>0</span> 2月  <span class=m>14</span> 09:54 file_2.txt
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><h3 id=怎么使用while>怎么使用While<a href=#怎么使用while class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>当 While 后的表达式结果为 <code>true</code>时，执行循环内语句。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>i</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=o>[</span> <span class=nv>$i</span> -le <span class=m>5</span> <span class=o>]</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=nv>$i</span>
</span></span><span class=line><span class=cl>  <span class=o>((</span>i++<span class=o>))</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>Output:</p><pre tabindex=0><code>1
2
3
4
5
</code></pre><h3 id=退出码返回码-是什么>退出码/返回码 是什么？<a href=#退出码返回码-是什么 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>每个命令都返回退出状态，范围为0-255。 0代表成功，非0代表错误。 可以用来进行错误检查。</p><table><thead><tr><th style=text-align:left>数值</th><th style=text-align:left>含义</th></tr></thead><tbody><tr><td style=text-align:left>0</td><td style=text-align:left>成功</td></tr><tr><td style=text-align:left>2</td><td style=text-align:left>返回内置命令，从而提示错误</td></tr><tr><td style=text-align:left>126</td><td style=text-align:left>命令找到了，但不是可执行的</td></tr><tr><td style=text-align:left>127</td><td style=text-align:left>没有找到命令</td></tr><tr><td style=text-align:left>128+N</td><td style=text-align:left>由于接收到信号N，命令退出</td></tr></tbody></table><h4 id=怎么检查退出码>怎么检查退出码<a href=#怎么检查退出码 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p><code>$?</code> 包含了上一条命令执行的返回码。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls ./no/exist
</span></span><span class=line><span class=cl>ls: cannot access <span class=s1>&#39;./no/exist&#39;</span>: No such file or directory
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$?</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span></code></pre></div><p>如，在<code>if</code>表达式中检查返回码:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>HOST</span><span class=o>=</span><span class=s2>&#34;razeen.cn&#34;</span>
</span></span><span class=line><span class=cl>ping -c <span class=m>1</span> <span class=nv>$HOST</span>
</span></span><span class=line><span class=cl><span class=nv>RETURN_CODE</span><span class=o>=</span><span class=nv>$?</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$RETURN_CODE</span><span class=s2>&#34;</span> -eq <span class=s2>&#34;0&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$HOST</span><span class=s2> reachable.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$HOST</span><span class=s2> unreachable.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p><code>-c 1</code> 参数表示发送一个可达包就停止发送。 然后我们检查一下<code>ping</code>执行的返回码。</p><p>输出:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./ex.sh
</span></span><span class=line><span class=cl>PING razeen.cn <span class=o>(</span>47.108.161.7<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 47.108.161.7 <span class=o>(</span>47.108.161.7<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>50</span> <span class=nv>time</span><span class=o>=</span>38.5 ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--- razeen.cn ping statistics ---
</span></span><span class=line><span class=cl><span class=m>1</span> packets transmitted, <span class=m>1</span> received, 0% packet loss, <span class=nb>time</span> 0ms
</span></span><span class=line><span class=cl>rtt min/avg/max/mdev <span class=o>=</span> 38.541/38.541/38.541/0.000 ms
</span></span><span class=line><span class=cl>razeen.cn reachable.
</span></span></code></pre></div><h3 id=怎么连接多个命令>怎么连接多个命令<a href=#怎么连接多个命令 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><h4 id=逻辑运算符和命令退出状态>逻辑运算符和命令退出状态<a href=#逻辑运算符和命令退出状态 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>执行命令后都有退出状态，我们可以使用 <code>&&</code> 和 <code>||</code>去决定下一步。</p><h4 id=退出命令>退出命令<a href=#退出命令 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>你可以使用 <code>exit</code> 来决定退出码：</p><pre tabindex=0><code>exit 0
exit 1
exit 2
etc.
</code></pre><p>例如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>HOST</span><span class=o>=</span><span class=s2>&#34;razeen.cn&#34;</span>
</span></span><span class=line><span class=cl>ping -c <span class=m>1</span> <span class=nv>$HOST</span>  
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$?</span><span class=s2>&#34;</span> -ne <span class=s2>&#34;0&#34;</span> <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$HOST</span><span class=s2> unreachable.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=nb>exit</span> <span class=m>0</span>
</span></span></code></pre></div><p>我们可以将该脚本通过<code>&&</code>与其他脚本/命令连接。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./ex2.sh <span class=o>&amp;&amp;</span> ls
</span></span><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>2021-02-13-132m93.jpg   ex2.sh      file_1.txt  file_4.txt  
</span></span></code></pre></div><p>如果<code>./ex2.sh</code>返回状态码非0，后面的就不会执行。</p><h4 id=逻辑与->逻辑与 (&&)<a href=#逻辑与- class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>当<code>&&</code>前面的语句返回的状态码为<code>0</code>时，执行后面的语句。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir /tmp/bak <span class=o>&amp;&amp;</span> cp test.txt /tmp/bak
</span></span></code></pre></div><h4 id=逻辑或->逻辑或 (||)<a href=#逻辑或- class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>当<code>||</code>前面的语句返回的状态码非<code>0</code>时（也就是执行失败），执行后面的语句。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp test.txt /tmp/bak/ <span class=o>||</span> cp test.test.txt /tmp
</span></span></code></pre></div><p>例如：</p><p>如果<code>ping</code>通了，就执行后面的输出。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>host</span><span class=o>=</span><span class=s2>&#34;razeen.cn&#34;</span>
</span></span><span class=line><span class=cl>ping -c <span class=m>1</span> <span class=nv>$host</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;You can reach </span><span class=si>${</span><span class=nv>host</span><span class=si>}</span><span class=s2>.&#34;</span>
</span></span></code></pre></div><p>如果<code>ping</code>失败了，就执行后面的输出。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>host</span><span class=o>=</span><span class=s2>&#34;google.com&#34;</span>
</span></span><span class=line><span class=cl>ping -c <span class=m>1</span> <span class=nv>$host</span> <span class=o>||</span> <span class=nb>echo</span> <span class=s2>&#34;You can&#39;t reach </span><span class=si>${</span><span class=nv>host</span><span class=si>}</span><span class=s2>.&#34;</span>
</span></span></code></pre></div><h4 id=分号->分号 (;)<a href=#分号- class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>分号不是一个逻辑运算符，但你可以用它来分割语句。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp text.txt /tmp/bak/ <span class=p>;</span> cp test.txt /tmp
</span></span><span class=line><span class=cl><span class=c1># 等同于</span>
</span></span><span class=line><span class=cl>cp text.txt /tmp/bak/  
</span></span><span class=line><span class=cl>cp test.txt /tmp
</span></span></code></pre></div><h3 id=管道->管道 |<a href=#管道- class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>管道<code>|</code>两侧的命令在各自的子shell中运行，并且两者同时启动。</p><p>如下：</p><p>第一个命令将目录更改为主目录，并列出文件和目录。</p><p>第二个命令仅显示执行该命令的文件和目录。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span><span class=nb>cd</span> ~ <span class=o>&amp;&amp;</span> ls<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span><span class=nb>cd</span> ~ <span class=p>|</span> ls<span class=k>)</span><span class=s2>&#34;</span>
</span></span></code></pre></div><h3 id=函数>函数<a href=#函数 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>在<code>Bash</code>中，你可以使用<code>function</code>或者直接定义一个函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>function</span> <span class=k>function</span>-name<span class=o>(){}</span>
</span></span><span class=line><span class=cl><span class=c1># 或</span>
</span></span><span class=line><span class=cl><span class=k>function</span>-name<span class=o>(){}</span>
</span></span></code></pre></div><p>当你调用函数的时候，只需要函数名，不用带<code>()</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>function</span> hello<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Hello!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 正确</span>
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 错误</span>
</span></span><span class=line><span class=cl><span class=c1># hello()</span>
</span></span></code></pre></div><p>在函数中，可以调用其他函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>function</span> hello<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Hello!&#34;</span>
</span></span><span class=line><span class=cl>  now
</span></span><span class=line><span class=cl>  bye
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=k>function</span> now<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;It&#39;s </span><span class=k>$(</span>date +%r<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=k>function</span> bye<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Bye bye.&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># Hello!</span>
</span></span><span class=line><span class=cl><span class=c1># It&#39;s 09:29:44 PM</span>
</span></span><span class=line><span class=cl><span class=c1># Bye bye.</span>
</span></span></code></pre></div><p>但，需要注意函数的定义顺序。如果你在函数声明的前就去调用函数，函数就不会执行。如下， 在<code>hello</code>中执行<code>now</code>函数，但<code>now</code>是定义<code>hello</code>执行下面的，结果就会出错。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># this won&#39;t work</span>
</span></span><span class=line><span class=cl><span class=k>function</span> hello<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Hello!&#34;</span>
</span></span><span class=line><span class=cl>  now
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl><span class=k>function</span> now<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;It&#39;s </span><span class=k>$(</span>date +%r<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>输出：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./hello2.sh
</span></span><span class=line><span class=cl>Hello!
</span></span><span class=line><span class=cl>./hello2.sh: line 5: now: <span class=nb>command</span> not found
</span></span></code></pre></div><h4 id=函数传参>函数传参<a href=#函数传参 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>和脚本执行的时候传参一样，函数的参数也用<code>$1</code>&mldr;,<code>$@</code> 来输出。</p><p>注意<code>$0</code>这里并不是函数的名字，而是当前脚本的名字。</p><p><code>$N</code>是第N个参数，<code>$@</code>表示所有的参数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>function</span> fullname<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;My name is </span><span class=nv>$1</span><span class=s2> </span><span class=nv>$2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>fullname Razeen Cheng
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output</span>
</span></span><span class=line><span class=cl><span class=c1># ./func.sh</span>
</span></span><span class=line><span class=cl><span class=c1># My name is Razeen Cheng</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>function</span> greeting<span class=o>(){</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> NAME in <span class=nv>$@</span>
</span></span><span class=line><span class=cl>  <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Hi </span><span class=nv>$NAME</span><span class=s2>.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>greeting Tom Jerry
</span></span></code></pre></div><h3 id=变量的作用域>变量的作用域<a href=#变量的作用域 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>默认变量的作用域是全局的，必须先声明，后使用。 当然，最好在最上面就把需要的变量声明好。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>my_func<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>GLOBAL_VAR</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># 这时，变量还是空的</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Calling GLONAL_VAR before calling function my_func&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># echo $GLOBAL_VAR</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 声明后，就可以输出了</span>
</span></span><span class=line><span class=cl>my_func
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Calling GLONAL_VAR after calling function my_func&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$GLOBAL_VAR</span>
</span></span></code></pre></div><h4 id=局部变量>局部变量<a href=#局部变量 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>可以用<code>local</code>来定义局部变量，且只能在函数中使用。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash 
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>MY_VAR</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>my_func <span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>local</span> <span class=nv>MY_VAR</span><span class=o>=</span><span class=m>2</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;my_func: MY_VAR=</span><span class=nv>$MY_VAR</span><span class=s2>&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;global: MY_VAR=</span><span class=nv>$MY_VAR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>my_func
</span></span></code></pre></div><h3 id=函数返回码>函数返回码<a href=#函数返回码 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>你可以在函数中，指定返回码:</p><pre tabindex=0><code>return 0
</code></pre><p>函数中最后执行的命令的退出状态将隐式返回。 有效代码范围为0-255。<code>0</code>代表成功，<code>$?</code>可以显示退出码。</p><pre tabindex=0><code>$ my_function
$ echo $?
0
</code></pre><p>可以在<code>if</code> 判断中用<code>$?</code> ：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># 该函数用来创建一个备份文件</span>
</span></span><span class=line><span class=cl><span class=k>function</span> backup_file <span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> BACK <span class=c1># 声明局部变量</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> -f <span class=nv>$1</span> <span class=o>]]</span><span class=p>;</span><span class=k>then</span> <span class=c1># 检查参数（是否是文件）</span>
</span></span><span class=line><span class=cl>        <span class=nv>BACK</span><span class=o>=</span><span class=s2>&#34;/tmp/</span><span class=k>$(</span>basename <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>.</span><span class=k>$(</span>date +%F<span class=k>)</span><span class=s2>.</span><span class=nv>$$</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Backing up </span><span class=nv>$1</span><span class=s2> to </span><span class=nv>$BACK</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        cp <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$BACK</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=c1># 文件不存在.</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 调用函数</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    backup_file <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># if [[ $? -eq 0 ]]; then</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=k>$(</span>backup_file <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=k>)</span> -eq <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Backup succeeded.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Backup failed.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 备份失败，中断，并返回非0状态.</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    backup_file /etc/hosts
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;/etc/hosts Backup succeeded.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>上面这个脚本默认备份<code>/etc/hosts</code>文件，除非你制定一个文件外。如果你指定一个文件参数，他会先检查文件，然后备份到<code>/tmp</code>目录。</p><p><code>$$</code> 返回 <a href=https://tldp.org/LDP/abs/html/internalvariables.html>当前脚本执行的PID</a>. 每次运行PID都会发生变化。当你需要多次运行脚本时，或许对你有帮助。</p><p><code>basename ${1}</code> 可以从你输入的路径中提取文件的名字. 如 <code>basename /etc/hosts</code> 是 <code>hosts</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls /tmp
</span></span><span class=line><span class=cl>$ ex1           
</span></span><span class=line><span class=cl>Backing up /etc/hosts to /tmp/hosts.2020-10-04.77124
</span></span><span class=line><span class=cl>Backup succeeded.
</span></span><span class=line><span class=cl>$ ls /tmp
</span></span><span class=line><span class=cl>hosts.2020-10-04.77124
</span></span></code></pre></div><h4 id=关键字-exit-和-return>关键字 exit 和 return<a href=#关键字-exit-和-return class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p><code>return</code> 会跳出当前函数, <code>exit</code>会结束当前脚本。</p><h3 id=总结>总结<a href=#总结 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>这篇博客总结了常用的，我们需要了解的一些脚本语法与知识。如果向更好的使用<code>bash</code>, 我们还需要进一步学习更多的命令等。希望这篇博客能对你有所帮助。</p><h3 id=参考>参考<a href=#参考 class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><ol><li><a href=https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html>Variables</a>, <a href=https://tldp.org/LDP/abs/html/internalvariables.html>Internal variables</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=timonwong.shellcheck">shellcheck</a></li><li><a href=https://github.com/koalaman/shellcheck/wiki>shellcheck wiki</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=foxundermoon.shell-format">shell-format</a></li><li><a href=https://wiki.bash-hackers.org/start>The Bash Hackers Wiki</a></li><li><a href=https://tldp.org/LDP/abs/html/index.html>Advanced Bash-Scripting Guide</a></li></ol></div><div class="related-posts thin"><h2>相关推荐</h2><ul><li><a href=/posts/typora-upload-image-qiniu/>Typora 自动上传图片到七牛云</a></li></ul></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://razeencheng.com/tags/shell>shell</a></span><span class=tag><a href=https://razeencheng.com/tags/bash>bash</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>5075 字</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2021-02-01 19:46 +0000</p></footer></article><aside id=toc class=show-toc><div class=toc-title>目录</div><nav id=TableOfContents><ul><li><ul><li><a href=#hello-world>hello world</a></li><li><a href=#解释器>解释器</a></li><li><a href=#注释>注释</a></li><li><a href=#变量声明>变量声明</a></li><li><a href=#变量引用>变量引用</a></li><li><a href=#环境变量>环境变量</a></li><li><a href=#内部变量>内部变量</a></li><li><a href=#将命令输出分配给变量>将命令输出分配给变量</a></li><li><a href=#内建命令>内建命令</a></li><li><a href=#测试>测试</a></li><li><a href=#怎么使用-ifelse-和-ifelifelse>怎么使用 if/else 和 if/elif/else</a></li><li><a href=#双中括号的使用>双中括号的使用<code>[[]]</code></a></li><li><a href=#怎么使用-for-循环>怎么使用 For 循环</a></li><li><a href=#怎么传参>怎么传参</a></li><li><a href=#怎么接收用户输入>怎么接收用户输入</a></li><li><a href=#用大括号来表示范围->用大括号来表示范围 <code>{}</code></a></li><li><a href=#怎么使用while>怎么使用While</a></li><li><a href=#退出码返回码-是什么>退出码/返回码 是什么？</a></li><li><a href=#怎么连接多个命令>怎么连接多个命令</a></li><li><a href=#管道->管道 |</a></li><li><a href=#函数>函数</a></li><li><a href=#变量的作用域>变量的作用域</a></li><li><a href=#函数返回码>函数返回码</a></li><li><a href=#总结>总结</a></li><li><a href=#参考>参考</a></li></ul></li></ul></nav></aside><div class="post-nav thin"><a class=next-post href=https://razeencheng.com/posts/homelib-001-synology-hackintosh/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;新</span><br><span>Homelib (1)：5分钟上手黑群晖 NAS</span></a>
<a class=prev-post href=https://razeencheng.com/posts/typora-upload-image-qiniu/><span class=post-nav-label>旧&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>Typora 自动上传图片到七牛云</span></a></div><div id=google-ads class=thin><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4450478767591566" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4450478767591566 data-ad-slot=8164928618 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div id=comments class=thin><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//razeen-me.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer id=site-footer class="section-inner thin"><p>&copy; 2017 - 2022 <a href=https://razeencheng.com>Razeen</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://razeencheng.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://s.razeen.cn/assets/js/mermaid.min.js></script>
<script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(e=>{e.parentElement.outerHTML=`<div class="mermaid">${e.innerText}</div>`})</script><script src=https://razeencheng.com/js/main.min.4e6345981f1ff315bbb7afa61eacf413923b536e5a4d5b22f698d96b624d48c4.js integrity="sha256-TmNFmB8f8xW7t6+mHqz0E5I7U25aTVsi9pjZa2JNSMQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4BKH11NSEY"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4BKH11NSEY")</script></body></html>